#
# Schema definitions for iReceptor Plus clone objects
#
Info:
    title: iReceptor Plus Clone Schema
    description: Schema definitions for iReceptor Plus clone objects
    version: 1.0
    contact:
        name: iReceptor Plus
        url: https://github.com/ireceptor-plus
    license:
        name: Creative Commons Attribution 4.0 International
        url: https://creativecommons.org/licenses/by/4.0/

SubjectClone:
  discriminator: AIRR
  type: object
  required:
    - clone_id
    - repertoire_list
  properties:
    clone_id:
      type: string
      description: Unique clone identifier 
      x-airr:
        miairr: true 
        adc-api-optional: false
    repertoire_list:
      type: array
      description: List of processed repertoires that are aggregated.
      items:
        type: object
        properties:
          repertoire_id:
            type: string
            description: Identifier to the associated repertoire in study metadata.
            x-airr:
              miairr: false
              adc-api-optional: false
          data_processing_id:
            type: string
            description: >
                Identifier to the data processing object in the repertoire metadata
                for this rearrangement. If this field is empty than the primary data processing object is assumed.
            x-airr:
              miairr: false
              adc-api-optional: false
    insertions:
      type:  string 
      description: Clone insertion mutations 
    v_call:
      type:  string 
      description: V gene name assigned to the clonesequence
    j_call:
      type:  string 
      description: J gene name assigned to the clone sequence 
    deletions:
      type:  string 
      description: Clone deletion mutations
    junction:
      type:  string 
      description: Clone cdr3 nucleotide sequence 
    junction_length:
      type:  int 
      description: Clone cdr3 length 
    junction_aa:
      type:  string 
      description: Clone cdr3 amino acid translation of the cdr3
    junction_aa_length:
      type:  int 
      description: Clone cdr3 amino acid translation length 
    instances:
      type:  Int 
      description: Clone overall instance count 
    copies:
      type:  int 
      description: Clone overall total count
    germline_database:
      type:  string
    tree:
      type:  json 
      description: JSON tree representation

RepertoireClone:
  discriminator: AIRR
  type: object
  required:
    - clone_id
    - repertoire_id
    - data_processing_id
  properties:
    clone_id:
      type: string
      description: Unique Clone identifier
      x-airr:
        miairr: true 
    repertoire_id:
      type: string
      description: Identifier to the associated repertoire in study metadata.
      x-airr:
        miairr: false
        adc-api-optional: false
    data_processing_id:
      type: string
      description: >
          Identifier to the data processing object in the repertoire metadata
          for this clone. If this field is empty than the primary data processing object is assumed.
      x-airr:
        miairr: false
        adc-api-optional: false
    productive:
      type: boolean
      description: True if clone is productive, False if not
      x-airr:
        miairr: true 
    uniques :
      type: integer
      description: Clone overall unique count
    instances:
      type: integer
      description: Clone overall instance count 
    avg_v_identity:
      type: string
      description: The average V-gene NT identity across all the sequences in a clone.
    top_copy_seq_sequence:
      type: string
      description: The full aligned sequence with the highest copies in the clone
    top_copy_seq_copies:
      type: integer
      description: The number of copies for top_copy_seq_sequence
    top_instance_seq_sequnence:
      type: string
      description: The sequence for instance with the highest copies
    top_instance_seq_copies:
      type: integer
      description: The number of copies for top_instance_seq_sequnence
    mutations:
      type: string
      description: A JSON format that includes the germline NT, the mutated NT, the hypothetical AA change (ignoring all other mutations) and the final AA change (the actual AA resulting from all mutations in the associated codon)
